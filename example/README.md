# Flutter Magento Example

Это пример приложения, демонстрирующий использование Flutter Magento плагина.

## Возможности

- ✅ Конфигурация подключения к Magento API (с поддержкой .env файлов)
- ✅ Аутентификация (вход и регистрация)
- ✅ Просмотр каталога продуктов с реальными данными из Magento
- ✅ Поиск по продуктам через GraphQL API
- ✅ Отображение категорий товаров
- ✅ Загрузка реальных изображений продуктов
- ✅ Отображение специальных цен и скидок
- ✅ Добавление товаров в корзину
- ✅ Управление корзиной
- ✅ Современный Material Design интерфейс
- ✅ Поддержка GraphQL API для быстрой загрузки данных

## Структура приложения

### Экраны

1. **Home Screen** - Главная страница с обзором статуса подключения
2. **Auth Screen** - Вход и регистрация пользователей
3. **Products Screen** - Каталог продуктов с поиском и реальными данными
4. **Categories Screen** - Просмотр категорий товаров
5. **Cart Screen** - Корзина покупок
6. **Config Screen** - Настройка подключения к Magento API

### Провайдеры

- **AppProvider** - Основной провайдер состояния приложения

## Быстрый старт

### 1. Установка зависимостей

```bash
flutter pub get
```

### 2. Запуск приложения

```bash
flutter run
```

### 3. Настройка Magento API

#### Вариант 1: Использование .env файла (рекомендуется)
1. Скопируйте `.env.sample` в `.env`:
   ```bash
   cp .env.sample .env
   ```
2. Отредактируйте `.env` файл и укажите нужные URL
3. Запустите приложение - настройки загрузятся автоматически

#### Вариант 2: Через интерфейс приложения
1. Откройте вкладку "Config"
2. Введите URL вашего Magento магазина или используйте кнопку "Use Default Demo"
3. Нажмите "Save & Initialize"

#### Примеры URL для тестирования:

- `https://luma-demo.scandipwa.com/` ⭐ (Рекомендуется)
- `https://demo.magento.com`
- `https://magento2-demo.nexcess.net`
- `https://demo-m2.bird.eu`

### 4. Использование функций

1. **Настройка API**: Используйте вкладку "Config" для настройки подключения
2. **Аутентификация**: Перейдите на вкладку "Auth" для входа или регистрации
3. **Продукты**: Просматривайте каталог с реальными данными на вкладке "Products"
4. **Категории**: Изучайте структуру категорий на вкладке "Categories"
5. **Корзина**: Управляйте товарами в корзине на вкладке "Cart"

#### Особенности

- **Реальные данные**: Все продукты и категории загружаются из Magento API
- **Изображения**: Автоматическая загрузка изображений продуктов
- **Цены**: Отображение обычных и специальных цен со скидками
- **Поиск**: Быстрый поиск по названию и описанию продуктов
- **Категории**: Иерархическое отображение категорий товаров

## Архитектура

Приложение использует архитектуру Provider для управления состоянием:

```
lib/
├── main.dart                 # Точка входа в приложение
├── providers/
│   └── app_provider.dart     # Основной провайдер состояния
└── screens/
    ├── home_screen.dart      # Главная страница
    ├── config_screen.dart    # Настройки API
    ├── auth_screen.dart      # Аутентификация
    ├── products_screen.dart  # Каталог продуктов
    └── cart_screen.dart      # Корзина
```

## Основные компоненты

### AppProvider

Центральный провайдер, управляющий:
- Инициализацией Magento API
- Состоянием аутентификации
- Загрузкой продуктов
- Управлением корзиной
- Обработкой ошибок

### Расширения моделей

Добавлены расширения для удобства работы:

```dart
extension CartExtension on Cart {
  int get itemsCount => items?.length ?? 0;
  double get grandTotal => totals?.grandTotal ?? 0.0;
}

extension CartItemExtension on CartItem {
  int get quantity => qty ?? 0;
}
```

## Функции

### Конфигурация API

- Ввод и сохранение URL Magento магазина
- Проверка соединения
- Отображение статуса подключения

### Аутентификация

- Вход по email и паролю
- Регистрация новых пользователей
- Отображение информации о пользователе
- Выход из системы

### Каталог продуктов

- Загрузка списка продуктов
- Поиск по названию
- Отображение информации о продукте
- Добавление в корзину

### Корзина

- Просмотр товаров в корзине
- Изменение количества
- Удаление товаров
- Подсчет общей стоимости

## Требования

- Flutter 3.9.2+
- Dart 3.0+
- iOS 11.0+ / Android API 21+

## Зависимости

- `flutter_magento` - основной плагин
- `provider` - управление состоянием
- `shared_preferences` - локальное хранение настроек
- `flutter_secure_storage` - безопасное хранение токенов

## Разработка

### Добавление новых функций

1. Создайте новый экран в папке `screens/`
2. Добавьте необходимые методы в `AppProvider`
3. Обновите навигацию в `main.dart`

### Обработка ошибок

Все ошибки обрабатываются в `AppProvider` и отображаются пользователю через SnackBar или специальные виджеты.

### Локализация

Приложение подготовлено для локализации. Строки можно вынести в отдельные файлы локализации.

## Поддержка

Если у вас возникли вопросы или проблемы, обратитесь к документации основного плагина или создайте issue в репозитории.